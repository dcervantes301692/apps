<ion-header>
  <ion-navbar color="blue">
    <table class="encabezado">
      <tr>
        <td width="20px" align="left">
          <button ion-button menuToggle clear>
            <ion-icon name="menu" class="icono"></ion-icon>
          </button>
        </td>
        <td align="center">
          <label>Pedido</label>
        </td>
        <td width="40px" align="right">
          <button ion-button clear class="BTNbusqueda" (click) = "ocultar()">
            Buscar Producto</button>
        </td>
      </tr>
    </table>
  </ion-navbar> 
</ion-header>

<ion-content>
  <div padding class="tablaBusqueda" id="tablaBusqueda" align ="center">
    <label>Ingresa un c√≥digo valido que deseas buscar</label>
    <table>
      <tr>
        <td width="45%">
          <input type="number" [(ngModel)]="BuscarP" class="inputBusqueda">
        </td>
        <td width="5%"></td>
        <td width="25%">
          <button ion-button full clear class="btnBuscador" (click) = "btnBuscar()">
            Buscar</button>
        </td>
        <td width="25%">
          <button ion-button full clear class="btnBuscadorCancelar" (click)="btnCancelar()">
            Cancelar</button>
        </td>
      </tr>
    </table>
  </div>
  <div>
    <ion-list *ngFor="let b of ProductoBusqueda">
      <ion-item-sliding>
        <ion-item id="kit">
          <table>
            <tr>
              <td rowspan="3" class="imgPedido">
                <img src="{{b.img99x148}}">
              </td>
              <td colspan="7" class="nombre">{{b.NOMBRE}}</td>
              <td rowspan="3" class="moneda">$</td>
              <td rowspan="3" class="precio">{{b.PRECIO}}</td>
            </tr>
            <tr>
              <td colspan="5" class="linea">{{b.LINEA}}</td>
            </tr>
            <tr>
              <td>{{b.ID}}</td>
              <td class="cantidadPedido">Cantidad</td>
              <td class="botonespedido">
                  <ion-icon name="remove-circle" 
                  (click)="removeBusqueda()"  color = "red"></ion-icon>
              </td>
              <td class="numCantidadPedido">{{cantidadBuscador}}</td>
              <td class="botonespedido">
                  <ion-icon name="add-circle" 
                  (click)="addBusqueda()" color = "green"></ion-icon>
              </td>
            </tr>
          </table>
          <table class="BotonoesBusqueda">
            <tr>
                <td>
                    <button ion-button full clear 
                    class="cancelarPedidoBusqueda" (click)="btnCancelar()">Cancelar</button>
                </td>
                <td>
                  <button ion-button full clear 
                  class="btnBuscador" (click)="btnAgregar(b.ID,b.PRECIO)">Agregar</button>
                </td>
              </tr>
          </table>
        </ion-item>
      </ion-item-sliding>
    </ion-list>
  </div>
  <div>
    <ion-list *ngFor="let p of pedidoActual">
      <ion-item-sliding *ngIf="p.idLinea != 89">
        <ion-item>
          <table>
            <tr>
              <td rowspan="3" class="imgPedido">
                <img src="{{p.img99x148}}">
              </td>
              <td colspan="7" class="nombre">{{p.NOMBRE}}</td>
              <td rowspan="3" class="moneda">$</td>
              <td rowspan="3" class="precio">{{p.PRECIO}}</td>
            </tr>
            <tr>
              <td colspan="5" class="linea">{{p.LINEA}}</td>
            </tr>
            <tr>
              <td class="codPedido">{{p.idProducto}}</td>
              <td class="cantidadPedido">Cantidad</td>
              <td class="botonespedido">
                  <ion-icon name="remove-circle" 
                  (click)="removeProducto(p.idProducto,p.CANTIDAD)"  color = "red"></ion-icon>
              </td>
              <td class="numCantidadPedido">{{p.CANTIDAD}}</td>
              <td class="botonespedido">
                  <ion-icon name="add-circle" 
                  (click)="addProducto(p.idProducto,p.CANTIDAD)" color = "green"></ion-icon>
              </td>
            </tr>
          </table>
        </ion-item>
        <ion-item-options side="rigth">
          <button ion-button color="red" (click) = "deleteProducto(p.idProducto)">
            <ion-icon name="trash"></ion-icon>
          </button>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </div>
  <div>
    <ion-list *ngFor="let p of pedidoActual">
      <ion-item-sliding *ngIf="p.idLinea == 89">
        <ion-item id="kit">
          <table>
            <tr>
              <td rowspan="3" class="imgPedido">
                <img src="{{p.img99x148}}">
              </td>
              <td colspan="7" class="nombre">{{p.NOMBRE}}</td>
              <td rowspan="3" class="moneda">$</td>
              <td rowspan="3" class="precio">{{p.PRECIO}}</td>
            </tr>
            <tr>
              <td colspan="5" class="linea">{{p.LINEA}}</td>
            </tr>
            <tr>
              <td>{{p.idProducto}}</td>
              <td class="cantidadPedido">Cantidad</td>
              <td class="botonespedido">
                  <ion-icon name="remove-circle" 
                  (click)="removekit(p.idProducto,p.CANTIDAD)"  color = "red"></ion-icon>
              </td>
              <td class="numCantidadPedido">{{p.CANTIDAD}}</td>
              <td class="botonespedido">
                  <ion-icon name="add-circle" 
                  (click)="addkit(p.idProducto,p.CANTIDAD)" color = "green"></ion-icon>
              </td>
            </tr>
          </table>
        </ion-item>
      </ion-item-sliding>
    </ion-list>
  </div>
</ion-content>
<ion-footer>
  <div padding>
    <table class="operaciones">
      <tr>
        <td class="TituloTicket">Total:</td>
        <td class="SimboloTicket" width="5%">$</td>
        <td class="TituloCosto" width="25%">{{TotalVenta}}</td>
      </tr>
      <tr>
        <td class="SubtiruloTicket">Comisionable:</td>
        <td class="SubtiruloTicketCosto" width="5%">$</td>
        <td class="SubtiruloTicketCosto"  width="25%">{{Comisionable}}</td>
      </tr>
      <tr>
        <td class="SubtiruloTicket">No Comisionable:</td>
        <td class="SubtiruloTicketCosto" width="5%">$</td>
        <td class="SubtiruloTicketCosto"  width="25%">{{NoComisionable}}</td>
      </tr>
      <tr>
        <td class="TituloTicket">Pago Ticket:</td>
        <td class="SimboloTicket" width="5%">$</td>
        <td class="TituloCosto"  width="25%">{{Pago}}</td>
      </tr>
      <tr>
        <td class="SubtiruloTicket">Tu Ganancia:</td>
        <td class="SubtiruloTicketCosto" width="5%">$</td>
        <td class="SubtiruloTicketCosto"  width="25%">{{Ganacia}}</td>
      </tr>
    </table>
    <button ion-button full clear (click)="Enviar()" id="habil">Enviar mi Pedido</button>
    <button ion-button full clear id="inhabil" disabled>Enviar mi Pedido</button>
  </div>
</ion-footer>
